@using System.ComponentModel.DataAnnotations
@using Sandbox
@using Sandbox.UI

@inherits Panel
@attribute [StyleSheet]
@namespace Facepunch.Gunfight.MainMenu

<root>
	@foreach ( var gamemode in TypeLibrary.GetTypes<Gamemode>().Where( x => !x.IsAbstract && x.HasAttribute<DisplayAttribute>() ) )
	{
		<GamemodeCard Gamemode=@gamemode class="@GetPanelClasses( gamemode )" onclick=@(() => Select( gamemode )) />
	}
</root>

@code
{
	public string SelectedGamemode { get; set; } = "KillConfirmedGamemode";
	
	void Select( TypeDescription gamemode )
	{
		SelectedGamemode = gamemode.Name;
		StateHasChanged();
	}

	string GetPanelClasses( TypeDescription gamemode )
	{
		if ( gamemode.Name == SelectedGamemode ) return "selected";
		return "";
	}
}
