@using Sandbox
@using Sandbox.UI

@implements INavigatorPage
@inherits Panel
@attribute [StyleSheet]
@namespace Facepunch.Gunfight.MainMenu

<root>
	<div class="main">
		<div class="left column grow">
			<div class="game-title">
				Gunfight
			</div>

            <label class="stats-title">Create A Class</label>

			<div style="flex-grow: 1;"/>

            <div class="scroll list">
                @foreach ( var kv in CreateAClass.CustomClass.All )
                {
                    <ClassCard ClassName=@kv.Key CustomClass=@kv.Value />
                }

                <ClassCard ClassName="Create new class..." onclick=@CreateClass />
            </div>

			<ActionButton onclick=@Return>
				<Title>
					Return
				</Title>
			</ActionButton>
		</div>
	</div>
</root>

@code
{
    void Return( PanelEvent e )
    {
        this.Navigate( "/" );
    }

    void CreateClass( PanelEvent e )
    {
        CreateAClass.CustomClass.SaveOne( $"Custom Class #{Gunfight.CreateAClass.CustomClass.All.Count() + 1}", new( "mp5", "usp" ) );
    }

    protected override int BuildHash()
    {
        return HashCode.Combine( Gunfight.CreateAClass.CustomClass.All.Count() );
    }
}
